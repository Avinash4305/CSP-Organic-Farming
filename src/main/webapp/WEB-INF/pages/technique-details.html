<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technique Details - FarmConnect</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #2e7d32;
            --primary-light: #4caf50;
            --primary-dark: #1b5e20;
        }
        
        .technique-header {
            background: linear-gradient(rgba(46, 125, 50, 0.9), rgba(46, 125, 50, 0.8));
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
        }
        
        .btn-primary-custom {
            background-color: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        
        .btn-primary-custom:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
        }
        
        .badge-category {
            background-color: var(--primary-light);
            color: white;
        }
        
        .steps-list {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: var(--primary);">
        <div class="container">
            <a class="navbar-brand" th:href="@{/}">
                <i class="fas fa-seedling me-2"></i>
                FarmConnect
            </a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/}">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/knowledge-dashboard}">Knowledge Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/farming-techniques}">Farming Techniques</a>
                    </li>
                </ul>
                <div class="navbar-nav" th:if="${loggedIn}">
                    <span class="nav-link text-light">
                        <i class="fas fa-user me-1"></i>
                        <span th:text="${userName}">User</span>
                    </span>
                    <a class="nav-link" th:href="@{/logout}">
                        <i class="fas fa-sign-out-alt me-1"></i> Logout
                    </a>
                </div>
                <div class="navbar-nav" th:unless="${loggedIn}">
                    <a class="nav-link" th:href="@{/login}">
                        <i class="fas fa-sign-in-alt me-1"></i> Login
                    </a>
                    <a class="nav-link" th:href="@{/register}">
                        <i class="fas fa-user-plus me-1"></i> Sign Up
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Technique Details -->
    <div class="technique-header" th:if="${technique}">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="display-5 fw-bold" th:text="${technique.title}">Technique Title</h1>
                    <p class="lead mb-0" th:text="${technique.description}">Technique description</p>
                </div>
                <div class="col-md-4 text-end">
                    <div class="mb-3">
                        <span class="badge badge-category me-2" th:text="${technique.category}">Category</span>
                        <span class="badge bg-warning me-2" th:if="${technique.difficulty}" th:text="${technique.difficulty}">Difficulty</span>
                        <span class="badge bg-info" th:if="${technique.region}" th:text="${technique.region}">Region</span>
                    </div>
                    <div class="text-white">
                        <i class="fas fa-star text-warning"></i>
                        <span th:text="${#numbers.formatDecimal(technique.rating, 1, 1)}">0.0</span>
                        (<span th:text="${technique.ratingCount}">0</span> ratings)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container" th:if="${technique}">
        <div class="row">
            <div class="col-lg-8">
                <!-- Steps Section -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h4 class="card-title mb-0">
                            <i class="fas fa-list-ol me-2"></i>Implementation Steps
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="steps-list" th:if="${technique.steps}">
                            <div th:each="line : ${#strings.arraySplit(technique.steps, '\n')}">
                                <p th:text="${line}">Step description</p>
                            </div>
                        </div>
                        <div th:unless="${technique.steps}" class="text-muted">
                            <p>No detailed steps available for this technique.</p>
                        </div>
                    </div>
                </div>

                <!-- Additional Information -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h4 class="card-title mb-0">
                            <i class="fas fa-info-circle me-2"></i>Additional Information
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <strong>Best Season:</strong>
                                <span th:if="${technique.season}" th:text="${technique.season}">All Seasons</span>
                                <span th:unless="${technique.season}" class="text-muted">All Seasons</span>
                            </div>
                            <div class="col-md-6">
                                <strong>Offline Available:</strong>
                                <span th:if="${technique.availableOffline}" class="text-success">
                                    <i class="fas fa-check"></i> Yes
                                </span>
                                <span th:unless="${technique.availableOffline}" class="text-muted">
                                    <i class="fas fa-times"></i> No
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <!-- Actions Sidebar -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Actions</h5>
                    </div>
                    <div class="card-body">
                        <button class="btn btn-primary-custom w-100 mb-2" th:if="${technique.availableOffline}">
                            <i class="fas fa-download me-2"></i>Save for Offline
                        </button>
                        <button class="btn btn-outline-secondary w-100 mb-2" th:unless="${technique.availableOffline}" disabled>
                            <i class="fas fa-download me-2"></i>Online Only
                        </button>
                        <button class="btn btn-success w-100 mb-2">
                            <i class="fas fa-check me-2"></i>Mark as Applied
                        </button>
                        <button class="btn btn-warning w-100">
                            <i class="fas fa-star me-2"></i>Rate & Review
                        </button>
                    </div>
                </div>

                <!-- Related Techniques -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Related Techniques</h5>
                    </div>
                    <div class="card-body">
                        <div class="list-group list-group-flush">
                            <a th:href="@{/knowledge-dashboard}" class="list-group-item list-group-item-action">
                                <i class="fas fa-arrow-right me-2"></i>View All Techniques
                            </a>
                            <a th:href="@{/knowledge-dashboard}" class="list-group-item list-group-item-action">
                                <i class="fas fa-seedling me-2"></i>Similar Planting Methods
                            </a>
                            <a th:href="@{/knowledge-dashboard}" class="list-group-item list-group-item-action">
                                <i class="fas fa-tint me-2"></i>Irrigation Techniques
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- If technique not found -->
    <div class="container" th:unless="${technique}">
        <div class="alert alert-danger text-center mt-5">
            <i class="fas fa-exclamation-triangle fa-2x mb-3"></i>
            <h4>Technique Not Found</h4>
            <p>The requested farming technique could not be found.</p>
            <a th:href="@{/knowledge-dashboard}" class="btn btn-primary-custom">Back to Knowledge Dashboard</a>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container text-center">
            <p class="mb-0">&copy; 2023 FarmConnect. All rights reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>